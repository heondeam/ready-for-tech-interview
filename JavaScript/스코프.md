# 스코프

한마디로 정의하자면, **식별자(변수)가 유효한 범위**를 뜻한다. 다시 말해서 모든 식별자(변수 이름, 함수 이름, 클래스 이름 등)는 자신이 선언된 위치에 의해서 다른 코드가 식별자 자신을 참조할 수 있는 유효 범위가 결정되는데, 이를 스코프라 한다.

### 스코프의 종류

코드는 **전역(global)**, **지역(local)** 으로 구분할 수 있다.

- 전역 - 코드의 가장 바깥 영역, 전역 스코프, 전역 변수
- 지역 - 함수 몸체 내부, 지역 스코프, 지역 변수

전역 변수는 어디서든지 참조할 수 있다. 반면에 지역 변수는 자신의 지역 스코프와 하위 지역 스코프에서 유효하다.

### 스코프 체인

모든 스코프는 하나의 계층적 구조로 연결되고, 모든 지역 스코프의 최상위 스코프는 전역 스코프가 된다. 이렇게 **스코프가 계층적으로 연결되는 것을 스코프 체인**이라 한다. 변수를 참소할 때, 자바스크립트 엔진은 스코프 체인을 통해 변수를 참조하는 코드의 스코프에서 시작하여 **상위 스코프 방향으로 이동하며 선언된 변수를 검색**한다.

### 함수 레벨 스코프

함수에 의해서만 지역 스코프가 생성된다는 의미이다. var 키워드를 사용해서 선언한 변수가 곧 함수 레벨의 스코프를 갖는다.  
즉 var로 선언한 변수는 코드 블록 내부에서 선언될 시에는 전역 스코프를 갖게 되며, 이는 개발자의 의도와 다른 결과를 초래할 수 있으므료 유의해야 한다.

### 블록 레벨 스코프

코드 블록 내부를 지역 스코프로 인정한다. let 또는 const와 같은 키워드로 선언한 변수 또는 상수에 이에 해당한다.

### 렉시컬 스코프

```
var x = 1;


function foo() {
  var x = 10;
  bar();
}

function bar() {
  console.log(x);
}

foo(); // ?
bar(); // ?
```

자바스크립트는 함수가 정의되는 위치에 따라 상위 스코프가 결정된다. 이러한 스코프 결정 방식을 **렉시컬 스코프(=정적 스코프)** 라고 한다.
즉, 함수가 호출된 위치는 상위 스코프 결정에 어떠한 영향도 주지 않으며, 함수의 상위 스코프는 언제나 자신이 정의된 스코프이다.
