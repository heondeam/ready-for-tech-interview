# ✅ 실행 컨텍스트

### 📌 소스코드의 타입

ECMAScript 사양은 소스코드를 4가지 타입으로 구분한다. 즉 **4가지 타입의 소스코드가 실행 컨텍스트를 생성한다.**  
4가지로 구분하는 이유는 타입에 따라 실행 컨텍스트를 생성하는 과정과 관리 내용이 다르기 때문이다.

| 소스코드의 타입 | 설명                                                             |
| --------------- | ---------------------------------------------------------------- |
| 전역 코드       | 전역에 존재하는 소스코드                                         |
| 함수 코드       | 함수 내부에 존재하는 소스코드                                    |
| eval 코드       | 빌트인 전역 함수인 eval 함수에 인수로 전달되어 실행되는 소스코드 |
| 모듈 코드       | 모듈 내부에 존재하는 소스코드                                    |

### 📌 소스코드의 평가와 실행

모든 소스코드는 실행에 앞서 평가 과정을 거치면서 코드를 실행하기 위한 준비를 한다. 즉, **자바스크립트 엔진은 소스코드를 평가 + 실행 과정으로 나누어 처리**한다.

1. 평가  
   평가 과정에서는 실행 컨텍스트를 생성하고, 변수와 함수 등의 선언문만 먼저 실행하여 스코프에 등록한다.
2. 실행  
   선언문을 제외한 소스코드가 순차적으로 실행된다. 즉, 런타임이 시작된다. 이 때, 필요한 정보(변수나 함수의 참조)를 실행 컨텍스트가 관리하는 스코프에서 검색하여 취득한다.

이처럼 코드가 실행되려면 스코프, 식별자, 코드 실행 순서 등의 관리가 필요하다.  
실행 컨텍스트는 소스코드를 실행하는 데 필요한 환경을 제공하고, 코드의 실행 결과를 실제로 관리하는 영역이다. (스코프 - 렉시컬 환경, 실행 순서 - 콜 스택)
**모든 코드는 실행 컨텍스트를 통해 실행되고 관리된다.**

### 📌 실행 컨텍스트 스텍 (= 콜 스택)

코드가 평가되어 생성된 실행 컨텍스트들은 스택 자료구조로 관리된다. 이를 콜 스택이라 부른다.

### 📌 렉시컬 환경

렉시컬 환경은 식별자와 식별자에 바인딩된 값, 그리고 상위 스코프에 대한 참조를 기록하는 자료구조이고, 실행 컨텍스트를 구성하는 컴포넌트이다. 스코프와 식별자를 관리한다.  
렉시컬 환경은 두 개의 컴포넌트로 구성된다.

1. 환경 레코드  
   스코프에 포함된 식별자를 등록하고 등록된 식별자에 바인딩된 값을 관리하는 장소. ([[GlobalThisValue]] 내부 슬롯에 this가 바인딩 되어 관리된다.)
2. 외부 렉시컬 환경에 대한 참조  
   상위 스코프를 가리킨다. (즉 상위 코드의 렉시컬 환경을 말한다.) 이를 통해 스코프 체인이 구현된다.
